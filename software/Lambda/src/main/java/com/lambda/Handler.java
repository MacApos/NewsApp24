package com.lambda;

import com.amazonaws.services.lambda.runtime.Context;
import com.amazonaws.services.lambda.runtime.RequestStreamHandler;
import com.fasterxml.jackson.core.JsonProcessingException;
import com.fasterxml.jackson.databind.ObjectMapper;
import com.lambda.dto.City;
import com.lambda.service.DynamoDBService;
import com.lambda.service.FetchDataService;
import reactor.core.publisher.Mono;

import java.io.InputStream;
import java.io.OutputStream;
import java.util.Collection;
import java.util.List;
import java.util.Map;


public class Handler implements RequestStreamHandler {
    private static final DynamoDBService dynamoDBService = new DynamoDBService();
    private static final FetchDataService fetchDataService = new FetchDataService();
    public static final ObjectMapper objectMapper = new ObjectMapper();
     static final List<City> initialCities = List.of(new City("New York", "New York"),
            new City("Ashburn", "Virginia"),
            new City("Hemingford", "Nebraska"));

    private final Map<String, String> recentNews = Map.of(
            "New York", "{\"_type\": \"News\", \"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/news\\/search?q=New+York%2cNew+York&setLang=en\", \"queryContext\": {\"originalQuery\": \"New York,New York\", \"adultIntent\": false}, \"totalEstimatedMatches\": 11300, \"sort\": [{\"name\": \"Best match\", \"id\": \"relevance\", \"isSelected\": false, \"url\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/news\\/search?q=New+York%2cNew+York&setLang=en&setLang=en\"}, {\"name\": \"Most recent\", \"id\": \"date\", \"isSelected\": true, \"url\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/news\\/search?q=New+York%2cNew+York&setLang=en&sortby=date&setLang=en\"}], \"value\": [{\"name\": \"DES: New cyanobacteria blooms identified on Lake Winnipesaukee\", \"url\": \"https:\\/\\/www.concordmonitor.com\\/des-New-cyanobacteria-blooms-identified-on-Lake-Winnipesaukee-new-hampshire-56638988\", \"image\": {\"contentUrl\": \"https:\\/\\/www.concordmonitor.com\\/\\/attachments\\/58\\/45462358.jpg\", \"thumbnail\": {\"contentUrl\": \"https:\\/\\/www.bing.com\\/th?id=OVFT.HL_j27p2wQjul-ndbGFEgi&pid=News\", \"width\": 300, \"height\": 300}}, \"description\": \"There are two new cyanobacteria blooms on Lake Winnipesaukee, according to the state Department of Environmental Services. New warnings and watches were issued Monday afternoon.A warning was issued for Wolfeboro in the area of Jockey Cove,\", \"about\": [{\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/1e851032-6eaf-61ba-afdd-f441ea0ed4a5?setLang=en\", \"name\": \"Lake Winnipesaukee\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/c29a66ba-1c01-0ce7-88b0-86f97ef52ccd?setLang=en\", \"name\": \"Cyanobacteria\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/8acbaef5-f2bf-d5d8-11af-138adcac0253?setLang=en\", \"name\": \"Wolfeboro, New Hampshire\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/c6bd3982-0f01-b399-36ea-6ae11fd29265?setLang=en\", \"name\": \"Alton, Illinois\"}], \"provider\": [{\"_type\": \"Organization\", \"name\": \"Concord Monitor\", \"image\": {\"thumbnail\": {\"contentUrl\": \"https:\\/\\/www.bing.com\\/th?id=ODF.ZxOTDFilSu7w9GF-novJfQ&pid=news\"}}}], \"datePublished\": \"2024-08-21T19:07:00.0000000Z\", \"category\": \"Health\"}, {\"name\": \"Knicks New Star Named Second-Biggest Impact This Season\", \"url\": \"https:\\/\\/www.si.com\\/nba\\/knicks\\/news\\/new-york-knicks-mikal-bridges-second-biggest-impact-season\", \"image\": {\"contentUrl\": \"https:\\/\\/images2.minutemediacdn.com\\/image\\/upload\\/c_crop,w_3717,h_2090,x_0,y_0\\/c_fill,w_720,ar_16:9,f_auto,q_auto,g_auto\\/images\\/ImagnImages\\/mmsport\\/all_knicks\\/01j5rqkqqn9afeq0za1v.jpg\", \"thumbnail\": {\"contentUrl\": \"https:\\/\\/www.bing.com\\/th?id=OVFT.UbrQp4zNDEpHhCKhwWHC1S&pid=News\", \"width\": 700, \"height\": 393}}, \"description\": \"What a difference a borough makes for newly-minted New York Knicks star Mikal Bridges. So claim the NBA experts of ESPN, who unveiled the results of a poll maki\", \"about\": [{\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/caeb7b9a-f5d7-4686-8fb5-cf7628296b13?setLang=en\", \"name\": \"New York\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/6ecd9bec-a4be-c76f-9d3b-84c7be52f6cb?setLang=en\", \"name\": \"Brooklyn Nets\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/f9b4c625-de18-cf7f-3a03-9dc0b7c0e633?setLang=en\", \"name\": \"Mikal Bridges\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/bf9ef424-f291-4182-33bb-7b963e59fd46?setLang=en\", \"name\": \"New York Knicks\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/f450400b-b742-2c13-00ff-b357f6273384?setLang=en\", \"name\": \"Madison Square Garden\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/3cd45057-e98d-1090-c55f-a6ca6cca00cc?setLang=en\", \"name\": \"ESPN\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/020d4bbf-2971-4236-b87d-c3ec1d7f851c?setLang=en\", \"name\": \"Philadelphia\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/7a74c040-22e5-bfd3-6d4d-1eb3138a3ef9?setLang=en\", \"name\": \"Paul George\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/25594afb-31a8-30cc-d7d2-02a5b0620b61?setLang=en\", \"name\": \"Victor Wembanyama\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/57f1d4b1-0476-5af9-a221-078f2b959a10?setLang=en\", \"name\": \"Chet Holmgren\"}], \"provider\": [{\"_type\": \"Organization\", \"name\": \"Sports Illustrated\", \"image\": {\"thumbnail\": {\"contentUrl\": \"https:\\/\\/www.bing.com\\/th?id=ODF.DAlg1K6d6FcCd2ockBPdcQ&pid=news\"}}}], \"datePublished\": \"2024-08-21T19:00:00.0000000Z\", \"category\": \"Sports\"}, {\"name\": \"Wings vs. Liberty WNBA Prediction, Odds and Key Players for Thursday, Aug. 22 (Trust New York?)\", \"url\": \"https:\\/\\/www.si.com\\/betting\\/wings-vs-liberty-wnba-prediction-odds-key-players-thursday-aug-22-trust-new-york\", \"image\": {\"contentUrl\": \"https:\\/\\/images2.minutemediacdn.com\\/image\\/upload\\/c_crop,w_8001,h_4500,x_0,y_178\\/c_fill,w_1440,ar_16:9,f_auto,q_auto,g_auto\\/images\\/ImagnImages\\/mmsport\\/si\\/01j5v2fhx0qzanbsrynd.jpg\", \"thumbnail\": {\"contentUrl\": \"https:\\/\\/www.bing.com\\/th?id=OVFT._qYd1D0KodjAsbhF--xmPC&pid=News\", \"width\": 700, \"height\": 393}}, \"description\": \"The New York Liberty have not lost a game since July 6, and they blew out the Dallas Wings on Tuesday night without All-Star guard Sabrina Ionescu in the lineup\", \"about\": [{\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/05ffa160-1727-a7b5-3733-1e3bfe70cd92?setLang=en\", \"name\": \"New York Liberty\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/9eb8276e-dc64-d7b6-0010-6c0b54707ad3?setLang=en\", \"name\": \"Dallas Wings\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/0269fa76-47a7-f3c2-1162-54ba8b3d2460?setLang=en\", \"name\": \"Sabrina Ionescu\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/a0f05e27-b4c9-3189-a345-60959fe08f12?setLang=en\", \"name\": \"Satou Sabally\"}], \"provider\": [{\"_type\": \"Organization\", \"name\": \"Sports Illustrated\"}], \"datePublished\": \"2024-08-21T18:17:00.0000000Z\", \"category\": \"Sports\"}, {\"name\": \"Bulls–t! New York doesn’t even make top 15 of themost foul-mouthed states\", \"url\": \"https:\\/\\/nypost.com\\/2024\\/08\\/21\\/lifestyle\\/bulls-t-new-york-doesnt-even-make-top-15-of-most-foul-mouthed-states\\/\", \"image\": {\"contentUrl\": \"https:\\/\\/nypost.com\\/wp-content\\/uploads\\/sites\\/2\\/2024\\/08\\/stock-young-man-overweight-shouting-88080196.jpg?quality=75&strip=all&w=1024\", \"thumbnail\": {\"contentUrl\": \"https:\\/\\/www.bing.com\\/th?id=OVFT.TOq8of-IWLs2F4DlisUCky&pid=News\", \"width\": 700, \"height\": 466}}, \"description\": \"Despite all the curses spewed at every delayed subway and rat scurrying out of the trash in our own city, New York itself doesn’t even make the top 15 of the most foul-mouthed states, according to a new study published by the word wizards at WordTips. In fact, New York State only hit the damn list at number 17. ( Seventeen!)\", \"about\": [{\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/caeb7b9a-f5d7-4686-8fb5-cf7628296b13?setLang=en\", \"name\": \"New York\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/9b33419c-e056-cece-2ed8-a06153195981?setLang=en\", \"name\": \"X\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/60d5dc2b-c915-460b-b722-c9e3485499ca?setLang=en\", \"name\": \"New York City\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/9caf1145-79ab-410b-9d75-d35af600fa91?setLang=en\", \"name\": \"Buffalo, New York\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/3bb5331b-7ad2-a15f-bea0-fa47bf5f7c10?setLang=en\", \"name\": \"Empire State\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/7918aca0-f66a-7e26-ae63-31d5831f87b2?setLang=en\", \"name\": \"Baltimore County, Maryland\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/4b3895a7-2674-8217-2dc2-1f64bdc6363f?setLang=en\", \"name\": \"Charm City\"}], \"provider\": [{\"_type\": \"Organization\", \"name\": \"New York Post\", \"image\": {\"thumbnail\": {\"contentUrl\": \"https:\\/\\/www.bing.com\\/th?id=ODF.ajvVh9V9VQOkNrdxJ1ZcWw&pid=news\"}}}], \"datePublished\": \"2024-08-21T18:16:00.0000000Z\", \"video\": {\"name\": \"Bulls–t! New York doesn’t even make top 15 of themost foul-mouthed states\", \"thumbnailUrl\": \"https:\\/\\/www.bing.com\\/th?id=OVF.xPVWnL%2BWOAQGP8YLO7yVaQ&pid=News\", \"thumbnail\": {\"width\": 520, \"height\": 346}}}, {\"name\": \"Olympic Champion Tamirat Tola To Defend His Title At The 2024 New York City Marathon\", \"url\": \"https:\\/\\/www.forbes.com\\/sites\\/parasjan\\/2024\\/08\\/21\\/olympic-champion-tamirat-tola-to-defend-his-title-at-the-2024-new-york-city-marathon\\/\", \"image\": {\"contentUrl\": \"https:\\/\\/imageio.forbes.com\\/specials-images\\/imageserve\\/66c62c4d4a162b71f474d70d\\/0x0.jpg?format=jpg&height=900&width=1600&fit=bounds\", \"thumbnail\": {\"contentUrl\": \"https:\\/\\/www.bing.com\\/th?id=OVFT.LD-JxzVECGMhs5_z8ui_by&pid=News\", \"width\": 700, \"height\": 514}}, \"description\": \"After podium finishes at the 2024 Paris Olympics, defending champions Tamirat Tola and Hellen Obiri announced their participation in the New York City Marathon.\", \"about\": [{\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/50f7f2ca-7c1b-d7bc-061b-c054c00fc308?setLang=en\", \"name\": \"New York City Marathon\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/62e408d9-0991-f779-f4ec-1b03a94cd80e?setLang=en\", \"name\": \"Geoffrey Mutai\"}], \"provider\": [{\"_type\": \"Organization\", \"name\": \"Forbes\", \"image\": {\"thumbnail\": {\"contentUrl\": \"https:\\/\\/www.bing.com\\/th?id=ODF.U6nYa4Huf-RFEhjg-V4hNg&pid=news\"}}}], \"datePublished\": \"2024-08-21T18:11:00.0000000Z\", \"category\": \"Sports\"}, {\"name\": \"Here are all of the celebrities at the Democratic convention's starry roll call\", \"url\": \"https:\\/\\/www.ajc.com\\/news\\/nation-world\\/here-are-all-of-the-celebrities-at-the-democratic-conventions-starry-roll-call\\/4WAR7TEUORFSBGQICMBV2HIKII\\/\", \"description\": \"The Democratic National Convention transformed what should have been the driest part of the evening – the roll call – into a party Thursday, complete with lively music and several celebrity appearances.\", \"about\": [{\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/eb5f527b-1e2d-86c2-e55c-1fc837f43499?setLang=en\", \"name\": \"Democratic National Convention\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/bb217e88-6e57-987d-025f-0204ceb76dd9?setLang=en\", \"name\": \"Roll Call\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/9eb4f051-9512-6cc5-b96a-69dc1884998a?setLang=en\", \"name\": \"Democratic Party\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/ef5cf66f-32b7-7271-286a-8e8313eda5c5?setLang=en\", \"name\": \"Kamala Harris\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/ffa02dca-2864-addb-2901-0af4d2e956b8?setLang=en\", \"name\": \"Patti LaBelle\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/9f586966-d60b-c059-e159-55c181503a84?setLang=en\", \"name\": \"Michelle Obama\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/71e02ff5-d0f0-869d-a7c1-2537faeff9a5?setLang=en\", \"name\": \"Spike Lee\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/881edbfc-45c2-0aeb-aa66-b0e7edd0a224?setLang=en\", \"name\": \"Do the Right Thing\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/1048245a-70ae-b4a6-413e-bd4a57ea543f?setLang=en\", \"name\": \"Malcolm X\"}], \"provider\": [{\"_type\": \"Organization\", \"name\": \"Atlanta Journal-Constitution\", \"image\": {\"thumbnail\": {\"contentUrl\": \"https:\\/\\/www.bing.com\\/th?id=ODF.5osew3Rt52H5XvIRJtI5Aw&pid=news\"}}}], \"datePublished\": \"2024-08-21T18:03:00.0000000Z\"}, {\"name\": \"Emily Blunt and John Krasinski's Daughters Make Rare Appearance at Taylor Swift's 'Eras Tour'\", \"url\": \"https:\\/\\/www.newsweek.com\\/entertainment\\/celebrity-news\\/emily-blunt-john-krasinskis-daughters-rare-appearance-taylor-swifts-eras-tour-1942496\", \"image\": {\"contentUrl\": \"https:\\/\\/d.newsweek.com\\/en\\/full\\/2455124\\/emily-blunt-john-krasinski.jpg\", \"thumbnail\": {\"contentUrl\": \"https:\\/\\/www.bing.com\\/th?id=OVFT.mFu8JOUJDcqsSOaK5P1Pny&pid=News\", \"width\": 700, \"height\": 466}}, \"description\": \"The Devil Wears Prada star, 41, was seen handing out bracelets from the VIP box during Taylor Swift 's Tuesday, August 20 show, in a fan video shared to X (formerly known as Twitter ). Her husband of 14 years was right by her side, holding their youngest daughter, Violet, 7.\", \"about\": [{\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/64ed04ee-734f-6a89-a646-8340f50d3f3a?setLang=en\", \"name\": \"Emily Blunt\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/2cc704fd-5dd5-caaf-253e-8c906e822426?setLang=en\", \"name\": \"John Krasinski\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/98004a38-a3ea-b902-b6d3-687b30b54353?setLang=en\", \"name\": \"Taylor Swift\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/ca60ec7e-9834-abb2-ce4c-849059ce26b6?setLang=en\", \"name\": \"The Devil Wears Prada\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/860dea43-a2c0-7912-8370-4ef51face341?setLang=en\", \"name\": \"X\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/c47da78b-4fdf-3297-761e-74439706bca1?setLang=en\", \"name\": \"Twitter\"}], \"mentions\": [{\"name\": \"Emily Blunt\"}, {\"name\": \"John Krasinski\"}, {\"name\": \"Newsweek\"}], \"provider\": [{\"_type\": \"Organization\", \"name\": \"Newsweek\", \"image\": {\"thumbnail\": {\"contentUrl\": \"https:\\/\\/www.bing.com\\/th?id=ODF.uTJA7JDoTGKvff5o3jotfg&pid=news\"}}}], \"datePublished\": \"2024-08-21T17:48:00.0000000Z\", \"category\": \"Entertainment\"}, {\"name\": \"Newsweek and Statista Announce Fifth Annual “America‘s Best Physical Rehabilitation Centers” Ranking\", \"url\": \"https:\\/\\/markets.businessinsider.com\\/news\\/stocks\\/newsweek-and-statista-announce-fifth-annual-america-s-best-physical-rehabilitation-centers-ranking-1033711879\", \"description\": \"The assessment incorporated quality metrics for Inpatient Rehabilitation Facilities published by the U.S. Centers for Medicare & Medicaid Services, providing an objective benchmark for care standards.\", \"about\": [{\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/368c0fa9-4c2e-0ef6-5a71-895e78732f0c?setLang=en\", \"name\": \"Newsweek\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/e2b032af-d1c1-cf7b-764b-e0c766745208?setLang=en\", \"name\": \"Statista\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/60d5dc2b-c915-460b-b722-c9e3485499ca?setLang=en\", \"name\": \"New York City\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/755d5a05-fa6d-45c5-d0fb-99063d64b7ce?setLang=en\", \"name\": \"Centers for Medicare & Medicaid Services\"}], \"provider\": [{\"_type\": \"Organization\", \"name\": \"Business Insider\"}], \"datePublished\": \"2024-08-21T17:48:00.0000000Z\", \"category\": \"Business\"}, {\"name\": \"Human bones found near carousel in waterfront park in Brooklyn\", \"url\": \"https:\\/\\/www.newsday.com\\/news\\/nation\\/human-remains-found-brooklyn-carousel-n38425\", \"description\": \"New York City authorities are investigating after human bones were discovered near a waterfront carousel twice this week.\", \"provider\": [{\"_type\": \"Organization\", \"name\": \"Newsday\", \"image\": {\"thumbnail\": {\"contentUrl\": \"https:\\/\\/www.bing.com\\/th?id=ODF.85aUDNToFsCpCmrIeBdRag&pid=news\"}}}], \"datePublished\": \"2024-08-21T17:22:00.0000000Z\", \"category\": \"US\"}]}",
            "Ashburn", "{\"_type\": \"News\", \"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/news\\/search?q=Ashburn%2cVirginia&setLang=en\", \"queryContext\": {\"originalQuery\": \"Ashburn,Virginia\", \"adultIntent\": false}, \"totalEstimatedMatches\": 892, \"sort\": [{\"name\": \"Best match\", \"id\": \"relevance\", \"isSelected\": false, \"url\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/news\\/search?q=Ashburn%2cVirginia&setLang=en&setLang=en\"}, {\"name\": \"Most recent\", \"id\": \"date\", \"isSelected\": true, \"url\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/news\\/search?q=Ashburn%2cVirginia&setLang=en&sortby=date&setLang=en\"}], \"value\": [{\"name\": \"Punter calls out ‘No Fun League’ after Commanders ask him to erase tryout video\", \"url\": \"https:\\/\\/www.washingtontimes.com\\/news\\/2024\\/aug\\/20\\/punter-calls-out-no-fun-league-after-commanders-as\\/\", \"image\": {\"contentUrl\": \"https:\\/\\/twt-thumbs.washtimes.com\\/media\\/image\\/2018\\/11\\/10\\/ohio_st_michigan_st_football_25875_c0-358-3436-2362_s1200x700.jpg?53b6a8e8105e540f15475f0597174a0f52256fe7\", \"thumbnail\": {\"contentUrl\": \"https:\\/\\/www.bing.com\\/th?id=OVFT.RQKLkyi9WXQEEB_WmgEJgS&pid=News\", \"width\": 700, \"height\": 408}}, \"description\": \"A free agent punter claims the Commanders asked him to take down a video showing his recent tryout at the franchise’s Ashburn, Virginia, training facility. Drue Chrisman hasn’t removed his post and called out the NFL for being “no fun.\", \"about\": [{\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/f0ddbec7-2b32-8786-b71a-fff5c375b5ea?setLang=en\", \"name\": \"Washington Commanders\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/0cbce584-355c-3e12-1043-2396503864bd?setLang=en\", \"name\": \"Punter\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/b7445fce-442e-02f8-cbcd-77d1104e6f23?setLang=en\", \"name\": \"Ashburn, Virginia\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/a5990549-d8b2-65db-06ec-7f68fa6fdefa?setLang=en\", \"name\": \"Drue Chrisman\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/6ff32734-2ab0-2636-a1b0-1e2f5e94a701?setLang=en\", \"name\": \"National Football League\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/ca6a16b0-ceff-fe7f-89f2-319216ae6788?setLang=en\", \"name\": \"Cincinnati Bengals\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/6f3df7da-1ef6-48e3-b2b3-b5b5fce3e846?setLang=en\", \"name\": \"Ohio\"}], \"provider\": [{\"_type\": \"Organization\", \"name\": \"Washington Times\"}], \"datePublished\": \"2024-08-20T17:08:00.0000000Z\", \"category\": \"Sports\"}, {\"name\": \"Jayden Daniels, elegido como QB titular de los Commanders de Washington\", \"url\": \"https:\\/\\/www.chron.com\\/sports\\/article\\/jayden-daniels-elegido-como-qb-titular-de-los-19665006.php\", \"description\": \"ASHBURN, Virginia, EE.UU. (AP) — Jayden Daniels fue seleccionado como el quarterback titular de los Commanders de Washington. El entrenador en jefe Dan Quinn lo declaró el lunes después de dos partidos de pretemporada y un par de prácticas conjuntas.\", \"provider\": [{\"_type\": \"Organization\", \"name\": \"Houston Chronicle\"}], \"datePublished\": \"2024-08-19T00:00:00.0000000Z\"}, {\"name\": \"Trace McSorley excited to play for his hometown Commanders\", \"url\": \"https:\\/\\/sports.yahoo.com\\/trace-mcsorley-excited-play-hometown-121020507.html?fr=sycsrp_catchall\", \"image\": {\"contentUrl\": \"https:\\/\\/s.yimg.com\\/ny\\/api\\/res\\/1.2\\/xghkU_gmofV3.DGwcq8Elw--\\/YXBwaWQ9aGlnaGxhbmRlcjt3PTEyMDA7aD04MDA-\\/https:\\/\\/media.zenfs.com\\/en\\/washington_football_wire_usa_today_sports_articles_166\\/963158ced29b66ec8470147ca4974466\", \"thumbnail\": {\"contentUrl\": \"https:\\/\\/www.bing.com\\/th?id=OVFT.IPqkWlycE2rpzRYOY92bci&pid=News\", \"width\": 700, \"height\": 467}}, \"description\": \"With veteran Marcus Mariota and rookie Sam Hartman sidelined for Washington's Week 2 preseason game, the Commanders signed Ashburn, Virginia native Trace McSorley. After a record-setting career at Briar Woods High School, where he won two state ...\", \"about\": [{\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/26cb87b0-4783-09f9-4ce0-ad1b4aee44be?setLang=en\", \"name\": \"Trace McSorley\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/f0ddbec7-2b32-8786-b71a-fff5c375b5ea?setLang=en\", \"name\": \"Washington Commanders\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/c63cfbdb-b7e8-9496-ada7-905d9018391a?setLang=en\", \"name\": \"Sam Hartman\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/b7445fce-442e-02f8-cbcd-77d1104e6f23?setLang=en\", \"name\": \"Ashburn, Virginia\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/9c467cba-90ce-1793-572b-6bb11705d568?setLang=en\", \"name\": \"Briar Woods High School\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/cb513c6f-ebcd-66b2-154a-bc1293c89574?setLang=en\", \"name\": \"2019 NFL Draft\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/b7e4ff79-1bce-da13-c73e-0134bd8b3228?setLang=en\", \"name\": \"Baltimore Ravens\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/c8cd7373-1ccb-46f5-b5de-784a68025c0d?setLang=en\", \"name\": \"Arizona Cardinals\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/12d251cb-6dbd-148b-5640-85ffef4bbe03?setLang=en\", \"name\": \"Kliff Kingsbury\"}], \"provider\": [{\"_type\": \"Organization\", \"name\": \"Yahoo! Sports\"}], \"datePublished\": \"2024-08-17T05:11:00.0000000Z\", \"category\": \"Sports\"}, {\"name\": \"Man who broke into Trump’s Loudoun Co. campaign office identified\", \"url\": \"https:\\/\\/wtop.com\\/loudoun-county\\/2024\\/08\\/man-who-broke-into-trump-loudoun-co-campaign-office-identified\\/\", \"description\": \"The man who deputies say broke into the Ashburn campaign office of former President Donald Trump has been identified, and they are asking for help finding him.\", \"provider\": [{\"_type\": \"Organization\", \"name\": \"WTOP News\", \"image\": {\"thumbnail\": {\"contentUrl\": \"https:\\/\\/www.bing.com\\/th?id=ODF.C2iAm0J0zS_NO837exPzmQ&pid=news\"}}}], \"datePublished\": \"2024-08-15T08:54:00.0000000Z\", \"category\": \"US\"}, {\"name\": \"A position change for one of the Commanders' rookies?\", \"url\": \"https:\\/\\/sports.yahoo.com\\/position-change-one-commanders-rookies-080013999.html?fr=sycsrp_catchall\", \"image\": {\"contentUrl\": \"https:\\/\\/s.yimg.com\\/ny\\/api\\/res\\/1.2\\/nW2d5LAMaxqPH8MqOHyLfA--\\/YXBwaWQ9aGlnaGxhbmRlcjt3PTEyMDA7aD04MDA-\\/https:\\/\\/media.zenfs.com\\/en\\/washington_football_wire_usa_today_sports_articles_166\\/8fa5a7de55570c398f59fdc39c901fe2\", \"thumbnail\": {\"contentUrl\": \"https:\\/\\/www.bing.com\\/th?id=OVFT.U9xQ9Fg2FbePgg3bqtP1cC&pid=News\", \"width\": 700, \"height\": 466}}, \"description\": \"Albert Breer of Sports Illustrated spent a day in Ashburn, Virginia, last week on his training camp tour, previewing the Washington Commanders. While Breer's eyes were on rookie quarterback Jayden Daniels and head coach Dan Quinn,\", \"about\": [{\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/b7445fce-442e-02f8-cbcd-77d1104e6f23?setLang=en\", \"name\": \"Ashburn, Virginia\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/f0ddbec7-2b32-8786-b71a-fff5c375b5ea?setLang=en\", \"name\": \"Washington Commanders\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/02d66ba5-676a-b9fe-9999-b4fee1a08d7a?setLang=en\", \"name\": \"Jayden Daniels\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/31b0ae3c-bb23-0c2d-bee0-f42e6ffabde0?setLang=en\", \"name\": \"Sports Illustrated\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/d3f19ac7-f4e6-cfc3-7210-6e8f4c0ef088?setLang=en\", \"name\": \"Jeremy Chinn\"}], \"provider\": [{\"_type\": \"Organization\", \"name\": \"Yahoo! Sports\", \"image\": {\"thumbnail\": {\"contentUrl\": \"https:\\/\\/www.bing.com\\/th?id=ODF.S719DbZoJh4YKmcI5HTI3A&pid=news\"}}}], \"datePublished\": \"2024-08-15T08:01:00.0000000Z\", \"category\": \"Sports\"}, {\"name\": \"Police identify suspect in break-in of Trump campaign office in Virginia\", \"url\": \"https:\\/\\/www.washingtontimes.com\\/news\\/2024\\/aug\\/14\\/toby-shane-kessler-is-suspect-in-break-in-of-trump\\/\", \"description\": \"Police in northern Virginia said Wednesday they were looking for a homeless man they suspect broke into an office of Donald Trump’s presidential campaign.\", \"provider\": [{\"_type\": \"Organization\", \"name\": \"Washington Times\", \"image\": {\"thumbnail\": {\"contentUrl\": \"https:\\/\\/www.bing.com\\/th?id=ODF.fBfI3mDLESLjZxaW6HbgNQ&pid=news\"}}}], \"datePublished\": \"2024-08-14T22:32:00.0000000Z\"}, {\"name\": \"Suspect identified in Trump Campaign's Loudoun County, Virginia, office break-in\", \"url\": \"https:\\/\\/www.usatoday.com\\/story\\/news\\/politics\\/elections\\/2024\\/08\\/14\\/virginia-trump-campaign-office-burglarized-suspect-identified\\/74803097007\\/\", \"image\": {\"contentUrl\": \"https:\\/\\/www.usatoday.com\\/gcdn\\/authoring\\/authoring-images\\/2024\\/08\\/13\\/PSTA\\/74781442007-loudoun-co-break-in.png?crop=939,528,x0,y118&width=939&height=528&format=pjpg&auto=webp\", \"thumbnail\": {\"contentUrl\": \"https:\\/\\/www.bing.com\\/th?id=OVFT.KAfc4hv6jEVISonHQHAFsS&pid=News\", \"width\": 700, \"height\": 393}}, \"description\": \"The suspect forced entry into a back door of the office and spent a brief period inside before leaving, the sheriff’s office said in a statement on Wednesday.\", \"about\": [{\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/a561261b-ceee-0ba0-bcf5-2de238e9e689?setLang=en\", \"name\": \"Loudoun County, Virginia\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/bf7b4df5-b7ae-151b-6149-c0b9f456968c?setLang=en\", \"name\": \"Loudoun County Sheriff's Office\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/b7445fce-442e-02f8-cbcd-77d1104e6f23?setLang=en\", \"name\": \"Ashburn, Virginia\"}], \"provider\": [{\"_type\": \"Organization\", \"name\": \"USA Today\", \"image\": {\"thumbnail\": {\"contentUrl\": \"https:\\/\\/www.bing.com\\/th?id=ODF.m1iod5ODNIyyKu23kGIllQ&pid=news\"}}}], \"datePublished\": \"2024-08-14T21:01:00.0000000Z\", \"category\": \"Politics\"}, {\"name\": \"Trump campaign office in Loudoun County burglarized\", \"url\": \"https:\\/\\/www.yahoo.com\\/news\\/trump-campaign-office-loudoun-county-193000258.html\", \"image\": {\"contentUrl\": \"https:\\/\\/media.zenfs.com\\/en\\/ny_post_videos_491\\/24924d716851981c43a2c4c81d4a1b23\", \"thumbnail\": {\"contentUrl\": \"https:\\/\\/www.bing.com\\/th?id=OVFT.MtSyWPeRz1J1XDMb8b_67C&pid=News\", \"width\": 700, \"height\": 394}}, \"description\": \"A burglar who broke into a Trump campaign office in Ashburn, Virginia on Sunday, is on the run, as detectives try to figure out who he is and what he might have taken. FOX 5's Shomari Stone has the story.\", \"about\": [{\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/a561261b-ceee-0ba0-bcf5-2de238e9e689?setLang=en\", \"name\": \"Loudoun County, Virginia\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/b7445fce-442e-02f8-cbcd-77d1104e6f23?setLang=en\", \"name\": \"Ashburn, Virginia\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/1a466af2-ed23-25bd-794d-1ca925e4681b?setLang=en\", \"name\": \"Donald Trump\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/1e192fb1-edcf-15b1-2918-0fd274141c47?setLang=en\", \"name\": \"Social Security\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/9280a2a6-6ff6-2758-3a76-665cff94ef73?setLang=en\", \"name\": \"Medicare\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/34f268cb-0019-fa41-d7e4-7fe472f43c04?setLang=en\", \"name\": \"New York Yankees\"}], \"provider\": [{\"_type\": \"Organization\", \"name\": \"Yahoo\", \"image\": {\"thumbnail\": {\"contentUrl\": \"https:\\/\\/www.bing.com\\/th?id=ODF.UM0amhg3WAObCEGqc4w_Cw&pid=news\"}}}], \"datePublished\": \"2024-08-14T19:30:00.0000000Z\", \"video\": {\"name\": \"Trump campaign office in Loudoun County burglarized\", \"thumbnailUrl\": \"https:\\/\\/www.bing.com\\/th?id=OVF.s0mbk4Egxh0r5rSp3NWb3Q&pid=News\", \"thumbnail\": {\"width\": 520, \"height\": 293}}}]}",
            "Hemingford", "{\"_type\": \"News\", \"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/news\\/search?q=Hemingford%2cNebraska&setLang=en\", \"queryContext\": {\"originalQuery\": \"Hemingford,Nebraska\", \"adultIntent\": false}, \"totalEstimatedMatches\": 140, \"sort\": [{\"name\": \"Best match\", \"id\": \"relevance\", \"isSelected\": false, \"url\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/news\\/search?q=Hemingford%2cNebraska&setLang=en&setLang=en\"}, {\"name\": \"Most recent\", \"id\": \"date\", \"isSelected\": true, \"url\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/news\\/search?q=Hemingford%2cNebraska&setLang=en&sortby=date&setLang=en\"}], \"value\": [{\"name\": \"Bobby Mills: Nebraska Prep Football Classification Changes for the 2024\\/2025 Cycle\", \"url\": \"https:\\/\\/theindependent.com\\/sports\\/high-school\\/football\\/bobby-mills-nebraska-prep-football-classification-changes-for-the-2024-2025-cycle\\/article_0fe211ba-5f5b-11ef-8284-67551858361e.html\", \"image\": {\"contentUrl\": \"https:\\/\\/bloximages.chicago2.vip.townnews.com\\/theindependent.com\\/content\\/tncms\\/assets\\/v3\\/editorial\\/0\\/fe\\/0fe211ba-5f5b-11ef-8284-67551858361e\\/66c5656269047.preview.jpg?crop=1763%2C926%2C0%2C124&resize=1200%2C630&order=crop%2Cresize\", \"thumbnail\": {\"contentUrl\": \"https:\\/\\/www.bing.com\\/th?id=OVFT.U4soMpLMnv-o92ctH33n1i&pid=News\", \"width\": 700, \"height\": 367}}, \"description\": \"In the past month, several high school football fans have asked me about some of the high school football classification changes for the next 2 year cycle and frankly they\", \"about\": [{\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/3e64ff5d-6b40-4dbe-91b1-0e554e892496?setLang=en\", \"name\": \"Nebraska\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/09bd48c9-9e67-f71c-2a4e-717c6ee90e1c?setLang=en\", \"name\": \"Nebraska School Activities Association\"}], \"provider\": [{\"_type\": \"Organization\", \"name\": \"Grand Island Independent\", \"image\": {\"thumbnail\": {\"contentUrl\": \"https:\\/\\/www.bing.com\\/th?id=ODF.A1JseMpkuwNT6zSHcKHUHQ&pid=news\"}}}], \"datePublished\": \"2024-08-21T01:15:00.0000000Z\", \"video\": {\"name\": \"Bobby Mills: Nebraska Prep Football Classification Changes for the 2024\\/2025 Cycle\", \"thumbnailUrl\": \"https:\\/\\/www.bing.com\\/th?id=OVF.km6B08PY6mXNDhFn0foHUw&pid=News\", \"thumbnail\": {\"width\": 520, \"height\": 273}}, \"category\": \"US\"}, {\"name\": \"Keep Alliance Beautiful - Environmental Innovation At Yellowstone\", \"url\": \"https:\\/\\/starherald.com\\/news\\/community\\/hemingford\\/keep-alliance-beautiful---environmental-innovation-at-yellowstone\\/article_28794e86-4ec2-11ef-896e-af9ee789beac.html\", \"image\": {\"contentUrl\": \"https:\\/\\/bloximages.chicago2.vip.townnews.com\\/starherald.com\\/content\\/tncms\\/assets\\/v3\\/editorial\\/6\\/86\\/6869c084-4ec2-11ef-a42b-eb55e32f35e7\\/66a967fb66a42.image.jpg?crop=1763%2C926%2C0%2C124&resize=1200%2C630&order=crop%2Cresize\", \"thumbnail\": {\"contentUrl\": \"https:\\/\\/www.bing.com\\/th?id=OVFT.F2HkunFpfkFp6YMk47bQIS&pid=News\", \"width\": 700, \"height\": 367}}, \"description\": \"My family set aside the first half of July for vacation this summer. We toured Wyoming over two weeks (as we had Colorado several years ago) instead of one big\", \"about\": [{\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/0108545e-0633-72fa-f89a-1d24a0ee8c4c?setLang=en\", \"name\": \"Yellowstone National Park\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/a070c5c2-b22d-41d8-b869-f20e583c4f80?setLang=en\", \"name\": \"Colorado\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/9caf1145-79ab-410b-9d75-d35af600fa91?setLang=en\", \"name\": \"Buffalo, New York\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/112d87ec-1a0b-5769-9c98-c0958db5f5aa?setLang=en\", \"name\": \"Medicine Bow Peak\"}], \"provider\": [{\"_type\": \"Organization\", \"name\": \"starherald.com\", \"image\": {\"thumbnail\": {\"contentUrl\": \"https:\\/\\/www.bing.com\\/th?id=ODF.2Q79YbVWmjzzTy84sy5JYg&pid=news\"}}}], \"datePublished\": \"2024-08-20T22:00:00.0000000Z\", \"video\": {\"name\": \"Keep Alliance Beautiful - Environmental Innovation At Yellowstone\", \"thumbnailUrl\": \"https:\\/\\/www.bing.com\\/th?id=OVF.IxYHNlntVwoHjuSgww4xpw&pid=News\", \"thumbnail\": {\"width\": 520, \"height\": 273}}}, {\"name\": \"A little-known, cash-strapped university outpost in Nebraska spawns renowned work – and serious awe\", \"url\": \"https:\\/\\/kearneyhub.com\\/news\\/state-regional\\/education\\/a-little-known-cash-strapped-university-outpost-in-nebraska-spawns-renowned-work-and-serious-awe\\/article_4dd19868-95ce-504f-b451-099ae6fdc395.html\", \"image\": {\"contentUrl\": \"https:\\/\\/bloximages.chicago2.vip.townnews.com\\/kearneyhub.com\\/content\\/tncms\\/assets\\/v3\\/editorial\\/4\\/dd\\/4dd19868-95ce-504f-b451-099ae6fdc395\\/66bfa4d5e6d35.preview.jpg?crop=1763%2C926%2C0%2C124&resize=1200%2C630&order=crop%2Cresize\", \"thumbnail\": {\"contentUrl\": \"https:\\/\\/www.bing.com\\/th?id=OVFT.w7HIAvgnbYDI0XpDIVO99i&pid=News\", \"width\": 700, \"height\": 367}}, \"description\": \"The Cedar Point field station doesn’t command attention like glitzier University of Nebraska assets. But the outpost 260 miles west of UNL has spawned groundbreaking research and bestselling books.\", \"about\": [{\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/3e64ff5d-6b40-4dbe-91b1-0e554e892496?setLang=en\", \"name\": \"Nebraska\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/da8d9606-b7e0-b6e4-906c-f24a08d41ad8?setLang=en\", \"name\": \"University of Nebraska–Lincoln\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/fbf40204-3e09-01da-4677-65e2457ab1ba?setLang=en\", \"name\": \"Sandhills\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/cb4d2853-06f4-4467-8e7c-4e31cbb35cb2?setLang=en\", \"name\": \"Wisconsin\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/e5fb6230-24d8-01b1-3096-469795b7a35b?setLang=en\", \"name\": \"Limnology\"}], \"provider\": [{\"_type\": \"Organization\", \"name\": \"Kearney Hub\", \"image\": {\"thumbnail\": {\"contentUrl\": \"https:\\/\\/www.bing.com\\/th?id=ODF.JFMVlGCtvRtFthOqUD-Kbw&pid=news\"}}}], \"datePublished\": \"2024-08-17T15:00:00.0000000Z\"}, {\"name\": \"Hemingford Ledger briefs for the week of August 15:\", \"url\": \"https:\\/\\/starherald.com\\/news\\/community\\/hemingford\\/hemingford-ledger-briefs-for-the-week-of-august-15\\/article_4e3168b0-59b8-11ef-bf61-93fce997e4ef.html\", \"image\": {\"contentUrl\": \"https:\\/\\/bloximages.chicago2.vip.townnews.com\\/starherald.com\\/content\\/tncms\\/assets\\/v3\\/editorial\\/8\\/f8\\/8f823724-3819-11ef-a116-1f4ca6520ce9\\/668363c675233.image.jpg?crop=1440%2C756%2C0%2C162&resize=1200%2C630&order=crop%2Cresize\", \"thumbnail\": {\"contentUrl\": \"https:\\/\\/www.bing.com\\/th?id=OVFT.pnd30uKAsKcCoxBTABg-Qy&pid=News\", \"width\": 700, \"height\": 367}}, \"description\": \"The Hemingford Booster Club supports extra-curricular activities for students in grades 7-12 as well as all Bobcat Students. Your $25 membership help to provide apparel and welcom\", \"about\": [{\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/7efde1f9-a55a-84c1-5398-afc0bc006b63?setLang=en\", \"name\": \"Hemingford, Nebraska\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/8ede5671-fd99-b64b-674b-bd8430a3a2e6?setLang=en\", \"name\": \"Box Butte County, Nebraska\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/74c64091-021e-bdd4-cd25-7203ced64d16?setLang=en\", \"name\": \"Keith Reid\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/08f73eef-3ed2-bd9a-51c9-3f6ee5ddadb5?setLang=en\", \"name\": \"Hula hoop\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/5a5b104e-b9ec-0fc8-8c73-a6de82b75e68?setLang=en\", \"name\": \"Bobcat Company\"}], \"provider\": [{\"_type\": \"Organization\", \"name\": \"starherald.com\", \"image\": {\"thumbnail\": {\"contentUrl\": \"https:\\/\\/www.bing.com\\/th?id=ODF.2Q79YbVWmjzzTy84sy5JYg&pid=news\"}}}], \"datePublished\": \"2024-08-15T15:01:00.0000000Z\"}, {\"name\": \"Fall Preview: Sutherland boys cross country looks to improve from last year in 2024\", \"url\": \"https:\\/\\/nptelegraph.com\\/sports\\/high-school\\/fall-preview-sutherland-boys-cross-country-looks-to-improve-from-last-year-in-2024\\/article_74f4635a-5a83-11ef-b0dd-9f212c3f1356.html\", \"image\": {\"contentUrl\": \"https:\\/\\/bloximages.chicago2.vip.townnews.com\\/nptelegraph.com\\/content\\/tncms\\/assets\\/v3\\/editorial\\/7\\/4f\\/74f4635a-5a83-11ef-b0dd-9f212c3f1356\\/66bd2a486a289.preview.png?crop=900%2C473%2C0%2C138&resize=900%2C473&order=crop%2Cresize\", \"thumbnail\": {\"contentUrl\": \"https:\\/\\/www.bing.com\\/th?id=OVFT.k3NBSe3xxZaZC-PFhvtsKS&pid=News\", \"width\": 700, \"height\": 367}}, \"description\": \"The Sutherland boys cross country team is small, but the Sailors are hoping to send a runner or two to the state meet in 2024.\", \"about\": [{\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/84e69b14-5022-2226-74f2-f472d1be80c0?setLang=en\", \"name\": \"Perkins County, South Dakota\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/7efde1f9-a55a-84c1-5398-afc0bc006b63?setLang=en\", \"name\": \"Hemingford, Nebraska\"}], \"provider\": [{\"_type\": \"Organization\", \"name\": \"nptelegraph\", \"image\": {\"thumbnail\": {\"contentUrl\": \"https:\\/\\/www.bing.com\\/th?id=ODF.wrm5CINaB5lZ3drhaHlCbQ&pid=news\"}}}], \"datePublished\": \"2024-08-15T12:00:00.0000000Z\", \"category\": \"Sports\"}, {\"name\": \"Hemingford Playground Fundraiser Match Exceeded\", \"url\": \"https:\\/\\/alliancetimes.com\\/hemingford-playground-fundraiser-match-exceeded\\/\", \"image\": {\"contentUrl\": \"https:\\/\\/alliancetimes.com\\/wp-content\\/uploads\\/2024\\/08\\/A1-BBHF-Foundation-Kids-Playground-Advisory-Committee.jpg\", \"thumbnail\": {\"contentUrl\": \"https:\\/\\/www.bing.com\\/th?id=OVFT.HVs6Pdv8MTug0P25relpMy&pid=News\", \"width\": 700, \"height\": 456}}, \"description\": \"The Hemingford Community Foundation is thrilled to announce that the community challenge to match $25,000 for the new playground has been surpassed! This incredible\", \"about\": [{\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/8ede5671-fd99-b64b-674b-bd8430a3a2e6?setLang=en\", \"name\": \"Box Butte County, Nebraska\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/7efde1f9-a55a-84c1-5398-afc0bc006b63?setLang=en\", \"name\": \"Hemingford, Nebraska\"}], \"provider\": [{\"_type\": \"Organization\", \"name\": \"Alliance Times Herald\", \"image\": {\"thumbnail\": {\"contentUrl\": \"https:\\/\\/www.bing.com\\/th?id=ODF.dEA8jR03bOd31-4bW32HTg&pid=news\"}}}], \"datePublished\": \"2024-08-14T07:06:00.0000000Z\"}, {\"name\": \"Bobby Mills: Nebraska High School Class D-1\\/8-Man Running Backs To Watch in 2024\", \"url\": \"https:\\/\\/theindependent.com\\/sports\\/high-school\\/football\\/bobby-mills-nebraska-high-school-class-d-1-8-man-running-backs-to-watch-in\\/article_643833e6-585f-11ef-98ee-0794005b9ac6.html\", \"image\": {\"contentUrl\": \"https:\\/\\/bloximages.chicago2.vip.townnews.com\\/theindependent.com\\/content\\/tncms\\/assets\\/v3\\/editorial\\/6\\/43\\/643833e6-585f-11ef-98ee-0794005b9ac6\\/66ba9add0c4b8.preview.jpg?crop=1763%2C926%2C0%2C124&resize=1200%2C630&order=crop%2Cresize\", \"thumbnail\": {\"contentUrl\": \"https:\\/\\/www.bing.com\\/th?id=OVFT.aB29whi8id3pSobguqZc7y&pid=News\", \"width\": 700, \"height\": 367}}, \"description\": \"Eleven 1000 yard rushers return in Class D-1, 8-Man football in 2024 and two of those Friday Night heroes even rushed for over TWO THOUSAND yards a year ago. Defending D1 Champion Stanton returns a pair of 1000 yarders as does Crofton.\", \"about\": [{\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/3e64ff5d-6b40-4dbe-91b1-0e554e892496?setLang=en\", \"name\": \"Nebraska\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/2c8bee89-b8d4-a907-f383-6e23866aaae7?setLang=en\", \"name\": \"Crofton, Nebraska\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/f9dcf0af-dea1-6625-7c28-7ffb294e41fa?setLang=en\", \"name\": \"Dundy County, Nebraska\"}, {\"readLink\": \"https:\\/\\/api.bing.microsoft.com\\/api\\/v7\\/entities\\/25c35ccf-bd14-7969-2b72-12268fab7e48?setLang=en\", \"name\": \"Brian Shaw\"}], \"provider\": [{\"_type\": \"Organization\", \"name\": \"Grand Island Independent\", \"image\": {\"thumbnail\": {\"contentUrl\": \"https:\\/\\/www.bing.com\\/th?id=ODF.A1JseMpkuwNT6zSHcKHUHQ&pid=news\"}}}], \"datePublished\": \"2024-08-12T23:27:00.0000000Z\", \"category\": \"Sports\"}, {\"name\": \"Nebraska State Tax Guide\", \"url\": \"https:\\/\\/www.kiplinger.com\\/state-by-state-guide-taxes\\/nebraska\", \"description\": \"Nebraska state tax might not be the most appealing for homeowners. That's because property taxes in Nebraska are higher than the national average. The Cornhusker State also imposes a hefty ...\", \"provider\": [{\"_type\": \"Organization\", \"name\": \"Kiplinger\"}], \"datePublished\": \"2024-08-08T16:32:00.0000000Z\"}, {\"name\": \"Two Nebraska Department of Corrections staff members arrested for unlawful acts of a corrections employee\", \"url\": \"https:\\/\\/www.ketv.com\\/article\\/nebraska-corrections-staff-members-arrested-unlawful-acts\\/61774755\", \"description\": \"AT KETV.COM. DOUGLAS COUNTY CORRECTIONS SAYS IT’S MAKING TREMENDOUS STRIDES IN STAFFING. CORRECTIONS DIRECTOR MIKE MYERS GAVE A REPORT TO THE COUNTY BOARD THIS MORNING. HE SAYS AS OF THE END OF ...\", \"provider\": [{\"_type\": \"Organization\", \"name\": \"KETV Omaha\"}], \"datePublished\": \"2024-08-02T22:50:00.0000000Z\"}, {\"name\": \"Gov. Pillen declares state of emergency for Nebraska counties impacted by Wednesday’s severe weather\", \"url\": \"https:\\/\\/www.1011now.com\\/2024\\/08\\/01\\/gov-pillen-declares-state-emergency-nebraska-counties-impacted-by-wednesdays-severe-weather\\/\", \"description\": \"(KOLN) - Gov. Jim Pillen signed a proclamation declaring a state of emergency following Wednesday night’s destructive storms that moved through central and eastern Nebraska. The large downpour ...\", \"provider\": [{\"_type\": \"Organization\", \"name\": \"1011 Now\"}], \"datePublished\": \"2024-08-01T23:09:00.0000000Z\"}]}"
    );

    public static Mono<City> fetchCity(City city, Map<String, String> newsMap) {
        String news = newsMap.get(city.getName());
        City newCity;
        try {
            newCity = objectMapper.readValue(news, City.class);
        } catch (JsonProcessingException e) {
            throw new RuntimeException(e);
        }
        return Mono.just(newCity);
    }

    @Override
    public void handleRequest(InputStream inputStream, OutputStream outputStream, Context context) {
        dynamoDBService.getAllNews().stream()
                .map(cityPage -> cityPage.items().isEmpty() ? initialCities : cityPage.items())
                .flatMap(Collection::stream)
                .forEach(city -> {
                    City block = fetchDataService.mockFetchCity(city, recentNews).block();
                    if(block != null){
                        block.updateCity(city);
                        city = block;
                    }
                    dynamoDBService.table.putItem(city);
                });
    }
}
